---
layout: post
title: 의존 객체 주입
date: 2023-04-25 05:48 +0900
---

### 자원에 의존하는 클래스

### 자원에 의존하는 [정적 유틸리티 클래스](https://www.notion.so/04-private-97bcc9895ae14241a6b1e8252ad00d7b)

- private final 정적 멤버 변수에 자원 생성

### 자원에 의존하는 [싱글턴 클래스](https://www.notion.so/03-private-99f3400dc514441898bf86fe3e12fdf3)

- private final 멤버 변수에 자원 생성
- 위 두 방법의 문제점
  - 사용하는 자원에 따라 동작이 달라지는 클래스에는 부적합
  - 문제 해결 방안
    1. final 한정자 제거 및 사전 교체 메서드 추가
       - 오류 발생 가능성이 다소 존재
       - 멀티스레드 환경에서 사용 불가
    2. 인스턴스 생성 시 생성자에 필요한 자원 전달
       - 의존 객체 주입

### 의존 객체 주입

- 인스턴스 생성 시 생성자에 필요한 자원 전달
- 여러 자원 인스턴스를 지원하면서, 클라이언트가 원하는 자원 사용 가능
- 자원의 개수나 의존 관계에 무관히 작동
- [불변 보장](https://www.notion.so/17-d237c71d33fb44fa885aae6a8cf9e303), 여러 클라이언트가 의존 객체 공유 가능
- 생성자, [정적 팩터리](https://www.notion.so/01-7cba410529c4421e92900573917c7680), [빌더](https://www.notion.so/02-15aa62f59f154901aa8c852c54747a0d) 모두에 적용 가능
- 생성자에 자원 팩터리를 의존 객체로 주입하는 식으로 변형
  - 팩터리
    - 특정 타입의 인스턴스를 반복해서 생성하는 객체
    - 팩터리 메서드를 구현한 객체
  - 자바 8의 Supplier<T> 인터페이스
    - 팩터리를 표현한 완벽한 예
    - Supplier<T>를 입력으로 받는 메서드
      - 일반적으로 [한정적 와일드카드 타입](https://www.notion.so/31-API-9167056eb4164841869cdfa3792d6f1b)을 사용하여 팩터리의 타입 매개변수를 제한
      - 클라이언트는 자신이 명시한 타입의 하위 타입을 생성하는 팩터리를 전달 가능
- 장점
  - 유연성, 재사용성, 테스트 용이성 개선
- 단점
  - 의존성이 수천 개가 넘어가는 큰 프로젝트에서는 코드를 어지럽게 함
    - 의존 객체 주입 프레임워크 사용 시 해소 가능
